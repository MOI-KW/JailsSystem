<app-loader *ngIf="isLoading"></app-loader>

<div class="card border my-5  shadow-none" *ngIf="showDetails">
    <div class="card-header  border-bottom bg-body">
        {{jailName}}
    </div>
    <div class="card-body  ">
        <div class="row m-0 p-0 w-100">
            <div class="col-4 my-4" *ngFor="let section of sectionList; let i = index">
                <div class="card  border  shadow-none h-100 ">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <h4 class="mb-2 me-5">{{getJailName(section)}}</h4>
                        </div>
                        <!-- <span class="badge badge-falcon fs-10 mb-4 badge-falcon-success">completed</span> -->
                        <div class="d-flex align-items-center mb-2">
                            <i class="bi bi-people-fill  fs-13 me-2"></i>
                            <p class="fontSemiBold mb-0 text-truncate  fs-14">العدد الحالي
                                <span class=" fs-14">{{jailInfromation[section].totalCount}}</span>
                            </p>
                        </div>
                        <div class="d-flex align-items-center mb-4">
                            <i class="bi bi-speedometer  fs-13 me-2"></i>
                            <p class="fontSemiBold mb-0 text-truncate lh-1  fs-14">الطاقة الاستعابية <span
                                    class="ms-1 text-body-emphasis fs-14">{{getJailCapacity(section)}}</span></p>
                        </div>

                        <div class="progress bg-200 w-100 rounded-pill" role="progressbar" aria-label="Basic example"
                            style="height:15px">
                            <div class="progress-bar rounded-pill animated-progress-bar"
                                [class]="getPrograssClass(jailInfromation[section].totalCount,getJailCapacity(section))"
                                [style]="getPrograssbarStyle(jailInfromation[section].totalCount,getJailCapacity(section))">

                            </div>
                        </div>
                        <div class="text-center fontSemiBold">
                            <p class="mb-2 ">
                                {{getPercentage(jailInfromation[section].totalCount,getJailCapacity(section))
                                +'%'}}</p>
                        </div>

                        <!-- -------------------------------------------------------------------- -->
                        <div class="col-6 m-0 p-0 text-center"
                            *ngFor="let ward of getCount(jailInfromation[section].wards)">
                            <div class="card border m-3  shadow-none h-100"
                                (click)="showPrisonerList(jailInfromation[section].sectionNumber,ward)">

                                <div class="card-header  border-bottom bg-body fs-13">
                                    {{getWardName(section,ward)}}
                                </div>
                                <div class="card-body p-3">
                                    <label class="fontBold mb-3 fs-14">
                                        {{getWardDescription(section,ward)}}
                                    </label>
                                    <div class="row d-flex">
                                        <div class="col-6">
                                            <label
                                                class="w-50 text-start fontBold">{{jailInfromation[section].wards[ward]}}</label>
                                        </div>
                                        <div class="col-6">
                                            <label
                                                class="w-50 text-end fontBold">{{getWardCapacity(section,ward)}}</label>
                                        </div>
                                    </div>
                                    <div class="progress bg-200 w-100 rounded-pill" role="progressbar"
                                        aria-label="Basic example" style="height:15px">
                                        <div class="progress-bar rounded-pill animated-progress-bar"
                                            [class]="getPrograssClass(jailInfromation[section].wards[ward],getWardCapacity(section,ward))"
                                            [style]="getPrograssbarStyle(jailInfromation[section].wards[ward],getWardCapacity(section,ward))">
                                            {{getPercentage(jailInfromation[section].wards[ward],getWardCapacity(section,ward))
                                            +'%'}}
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>

                        <!-- -------------------------------------------------------------------- -->





                    </div>
                </div>
            </div>
        </div>

    </div>
</div>








<div class="row m-0 p-0" *ngIf="showDetails && showList">
    <app-prison-data class="m-0 p-0" [selectedData]="filteredList"></app-prison-data>
</div>